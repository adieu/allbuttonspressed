<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    dir="{% if LANGUAGE_BIDI %}rtl{% else %}ltr{% endif %}"
    xml:lang="{% firstof LANGUAGE_CODE 'en' %}"
    lang="{% firstof LANGUAGE_CODE 'en' %}">
  {% load cms blog %}
  <head>
    <title>{% if request.path != '/' %}{% block title %}{% endblock %} - {% endif %}{{ site_name }}</title>
    {% blog_feeds %}

    {% block css %}
      <link rel="stylesheet" type="text/css" href="/media/design.css" />
      <link rel="stylesheet" type="text/css" href="/media/rest.css" />
      <link rel="stylesheet" type="text/css" href="/media/highlight.css" />
      <link rel="stylesheet" type="text/css" href="/media/project-feed.css" />
    {% endblock %}

    {% block js %}
    {% endblock %}

    {% block extra-head %}{% endblock %}
    <meta name="google-site-verification" content="NrOmvnSeEOkEb-yroqOh1Q3JFvjC4XFVVZ27Rb-HrYQ" />
  </head>

  <body>
    <div id="header">
      <a id="logo" href="/"><img alt="" src="/media/logo.png"/></a>
      {% if google_custom_search_id %}
        <div id="search">
          <div id="cse-search-form">Loading...</div>
          <script src="http://www.google.com/jsapi" type="text/javascript"></script>
          <script type="text/javascript">
            google.load('search', '1', {language : 'en'});
            google.setOnLoadCallback(function(){
              var customSearchControl = new google.search.CustomSearchControl('{{ google_custom_search_id|escapejs }}');
              customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
              var options = new google.search.DrawOptions();
              options.setSearchFormRoot('cse-search-form');
              customSearchControl.draw('cse', options);
            }, true);
          </script>
          <link rel="stylesheet" type="text/css" href="http://www.google.com/cse/style/look/greensky.css" />
          <link rel="stylesheet" type="text/css" href="/media/search-design.css" />
        </div>
      {% endif %}
      <ul class="menu">
        {% show_menu %}
      </ul>
    </div>

    <div class="columns">
      <div id="content" class="column">
        {% block content-header %}
          {% if error %}<div class="error">{{ error }}</div>{% endif %}
          {% if info %}<div class="info">{{ info }}</div>{% endif %}
          {% if messages %}
            {% for message in messages %}
              <div class="info">{{ message }}</div>
            {% endfor %}
          {% endif %}
        {% endblock %}

        <div id="cse" style="width:100%; display:inline;"></div>

        {% block content %}{% endblock %}
      </div>

      <div id="sidebar" class="column">
        {% block sidebar %}
          {% show_block 'sidebar' %}
        {% endblock %}
      </div>
    </div>

    <div id="footer">
      <p>Copyright {% now "Y" %} {{ site_copyright }}</p>
    </div>
    
    {% if google_analytics_id %}
      <script type="text/javascript">
      /* <![CDATA[ */
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
      /* ]]> */
      </script>
      <script type="text/javascript">
      /* <![CDATA[ */try {
      var pageTracker = _gat._getTracker("{{ google_analytics_id|escapejs }}");
      pageTracker._trackPageview();
      } catch(err) {}/* ]]> */</script>

    {% endif %}
  </body>
</html>
